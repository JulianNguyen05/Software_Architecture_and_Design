@startuml
!theme plain
skinparam componentStyle rectangle
skinparam roundcorner 10
skinparam linetype ortho

title System Architecture: MoneyTrackBot (Android + Django)

' --- KH·ªêI CLIENT (ANDROID) ---
package "üì± Client Side (Android App)" as Client {
    component [View Layer\n(Activities / Fragments)] as UI #E1F5FE
    component [ViewModel Layer\n(LiveData / Logic)] as VM #E1F5FE
    component [Repository Layer\n(Data Management)] as Repo #E1F5FE

    component "Network Module" as Net #B3E5FC {
        component [Retrofit Client] as Retrofit
        note right of Retrofit
            <b>Base URL Switcher</b>
            1. Local: http://10.0.2.2:8000
            2. Prod: https://moneytrackbot.onrender.com
        end note
    }
}

' --- KH·ªêI LOCAL (DEV ENV) ---
package "üíª Local Environment (Development)" as LocalEnv {
    node "Localhost / Emulator" {
        component [Django Dev Server\n(manage.py runserver)] as DjangoLocal #FFF9C4
        database "SQLite\n(db.sqlite3)" as DBSQLite #FFF9C4
    }
}

' --- KH·ªêI ONLINE (PRODUCTION) ---
package "‚òÅÔ∏è Production Environment (Render.com)" as ProdEnv {
    node "Render Cloud" {
        component [Web Service\n(Gunicorn + Django)] as DjangoProd #C8E6C9
        database "PostgreSQL\n(Managed DB)" as DBPostgres #C8E6C9
    }
}

' --- C√ÅC M·ªêI QUAN H·ªÜ (LU·ªíNG D·ªÆ LI·ªÜU) ---

' 1. Lu·ªìng n·ªôi b·ªô Android
UI --> VM : Quan s√°t (Observer)
VM --> Repo : Y√™u c·∫ßu d·ªØ li·ªáu
Repo --> Retrofit : G·ªçi API

' 2. Lu·ªìng k·∫øt n·ªëi Server

' --- ƒê∆∞·ªùng ƒëi Local (N√©t ƒë·ª©t m√†u cam) ---
Retrofit -[#orange,dashed]-> DjangoLocal : <b>Local API Call</b>\n(HTTP / 10.0.2.2)
DjangoLocal <--> DBSQLite : Read/Write

' --- ƒê∆∞·ªùng ƒëi Online (N√©t li·ªÅn m√†u xanh) ---
Retrofit -[#green,bold]-> DjangoProd : <b>Production API Call</b>\n(HTTPS / Internet)
DjangoProd <--> DBPostgres : Read/Write

' --- Ch√∫ th√≠ch ---
legend right
    | M√†u s·∫Øc | √ù nghƒ©a |
    | <#orange> | Lu·ªìng Dev (Local) |
    | <#green> | Lu·ªìng Production (Render) |
    | <#E1F5FE> | Android Components |
endlegend

@enduml